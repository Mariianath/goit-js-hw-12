{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function renderGallery(images) {\n  const markup = images\n    .map(\n      ({ webformatURL, largeImageURL, tags }) =>\n        `<a class=\"gallery__item\" href=\"${largeImageURL}\">\n          <img class=\"gallery__image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>`\n    )\n    .join('');\n\n  const galleryContainer = document.querySelector('.gallery');\n  if (galleryContainer) {\n    galleryContainer.insertAdjacentHTML('beforeend', markup);\n  }\n}\n","import axios from 'axios';\n\nconst API_KEY = '47523471-f6b5bf2e20bc9d436dc6d8dc4';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  if (!query || query.trim() === '') {\n    throw new Error('Query cannot be empty. Please provide a search term.');\n  }\n\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: perPage,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error.message);\n    throw new Error('Failed to fetch images. Please try again later.');\n  }\n}\n","import { renderGallery } from './js/render-functions.js';\nimport { fetchImages } from './js/pixabay-api.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// DOM Elements\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('input[name=\"searchQuery\"]');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\n// Ініціалізація SimpleLightbox\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n// Ініціалізація подій\nform.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(event) {\n  event.preventDefault();\n  const query = input.value.trim();\n\n  if (!query) {\n    showWarning('Please enter a search query.');\n    return;\n  }\n\n  resetGallery();\n  currentPage = 1;\n  currentQuery = query;\n\n  try {\n    toggleLoader(true);\n    const { hits, totalHits: fetchedTotalHits } = await fetchImages(currentQuery, currentPage);\n    totalHits = fetchedTotalHits;\n\n    if (hits.length === 0) {\n      showWarning('No images found. Try a different search term.');\n      return;\n    }\n\n    renderGalleryContent(hits);\n    showSuccess(`Found ${totalHits} images!`);\n\n    // Показати кнопку, якщо ще є результати\n    if (totalHits > hits.length) {\n      loadMoreBtn.classList.remove('is-hidden');\n    } else {\n      loadMoreBtn.classList.add('is-hidden');\n      showInfo(\"You've reached the end of search results.\");\n    }\n  } catch (error) {\n    showError('Something went wrong. Please try again.');\n  } finally {\n    toggleLoader(false);\n  }\n}\n\nasync function onLoadMore() {\n  currentPage += 1;\n\n  try {\n    toggleLoader(true);\n    const { hits } = await fetchImages(currentQuery, currentPage);\n\n    renderGalleryContent(hits);\n\n    const totalRendered = document.querySelectorAll('.gallery__item').length;\n    if (totalRendered >= totalHits) {\n      loadMoreBtn.classList.add('is-hidden');\n      showInfo(\"You've reached the end of search results.\");\n    }\n  } catch (error) {\n    showError('Something went wrong while loading more images.');\n  } finally {\n    toggleLoader(false);\n  }\n}\n\nfunction renderGalleryContent(images) {\n  gallery.insertAdjacentHTML('beforeend', renderGallery(images));\n  lightbox.refresh();\n}\n\nfunction resetGallery() {\n  gallery.innerHTML = '';\n  loadMoreBtn.classList.add('is-hidden');\n}\n\nfunction toggleLoader(show) {\n  loader.style.display = show ? 'block' : 'none';\n}\n\nfunction showWarning(message) {\n  iziToast.warning({ title: 'Warning', message, position: 'topRight' });\n}\n\nfunction showSuccess(message) {\n  iziToast.success({ title: 'Success', message, position: 'topRight' });\n}\n\nfunction showError(message) {\n  iziToast.error({ title: 'Error', message, position: 'topRight' });\n}\n\nfunction showInfo(message) {\n  iziToast.info({ title: 'Info', message, position: 'topRight' });\n}\n"],"names":["renderGallery","images","markup","webformatURL","largeImageURL","tags","galleryContainer","API_KEY","BASE_URL","fetchImages","query","page","perPage","params","axios","error","form","input","gallery","loadMoreBtn","loader","currentPage","currentQuery","totalHits","lightbox","SimpleLightbox","onSearch","onLoadMore","event","showWarning","resetGallery","toggleLoader","hits","fetchedTotalHits","renderGalleryContent","showSuccess","showInfo","showError","show","message","iziToast"],"mappings":"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"}