{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = import.meta.env.VITE_PIXABAY_API_KEY;\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: perPage,\n  };\n\n  const response = await axios.get(BASE_URL, { params });\n  return response.data;\n}\n","export function renderGallery(images) {\n    return images\n      .map(\n        ({ webformatURL, largeImageURL, tags }) =>\n          `<a class=\"gallery__item\" href=\"${largeImageURL}\">\n             <img class=\"gallery__image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n           </a>`\n      )\n      .join('');\n  }\n  \n  export function clearGallery(container) {\n    container.innerHTML = '';\n  }\n  ","import { fetchImages } from './js/pixabay-api';\nimport { renderGallery, clearGallery } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\nlet perPage = 15;\nlet lightbox;\n\nform.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(e) {\n  e.preventDefault();\n  query = e.currentTarget.elements.searchQuery.value.trim();\n  if (!query) return;\n\n  page = 1;\n  clearGallery(gallery);\n  loadMoreBtn.classList.add('is-hidden');\n\n  try {\n    const data = await fetchImages(query, page, perPage);\n    if (!data.hits.length) {\n      alert('No images found. Please try again.');\n      return;\n    }\n\n    gallery.innerHTML = renderGallery(data.hits);\n    lightbox = new SimpleLightbox('.gallery a').refresh();\n\n    if (data.totalHits > perPage) {\n      loadMoreBtn.classList.remove('is-hidden');\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nasync function onLoadMore() {\n  page += 1;\n\n  try {\n    const data = await fetchImages(query, page, perPage);\n\n    gallery.insertAdjacentHTML('beforeend', renderGallery(data.hits));\n    lightbox.refresh();\n\n    if (page * perPage >= data.totalHits) {\n      loadMoreBtn.classList.add('is-hidden');\n      alert(\"We're sorry, but you've reached the end of search results.\");\n    }\n\n    scrollPage();\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction scrollPage() {\n  const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","params","axios","renderGallery","images","webformatURL","largeImageURL","tags","clearGallery","container","form","gallery","loadMoreBtn","lightbox","onSearch","onLoadMore","data","SimpleLightbox","error","scrollPage","cardHeight"],"mappings":"6vBAEA,MAAMA,EAAU,OACVC,EAAW,2BAEjB,eAAsBC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,MAAMC,EAAS,CACb,IAAKN,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CAAA,EAIZ,OADiB,MAAME,EAAM,IAAIN,EAAU,CAAE,OAAAK,EAAQ,GACrC,IAClB,CClBO,SAASE,EAAcC,EAAQ,CAClC,OAAOA,EACJ,IACC,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,CAAM,IACpC,kCAAkCD,CAAa;AAAA,gDACTD,CAAY,UAAUE,CAAI;AAAA,gBAEnE,EACA,KAAK,EAAE,CACX,CAEM,SAASC,EAAaC,EAAW,CACtCA,EAAU,UAAY,EAC1B,CCPA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAId,EAAQ,GACRC,EAAO,EACPC,EAAU,GACVa,EAEJH,EAAK,iBAAiB,SAAUI,CAAQ,EACxCF,EAAY,iBAAiB,QAASG,CAAU,EAEhD,eAAeD,EAAS,EAAG,CAGzB,GAFA,EAAE,eAAc,EAChBhB,EAAQ,EAAE,cAAc,SAAS,YAAY,MAAM,OAC/C,EAACA,EAEL,CAAAC,EAAO,EACPS,EAAaG,CAAO,EACpBC,EAAY,UAAU,IAAI,WAAW,EAErC,GAAI,CACF,MAAMI,EAAO,MAAMnB,EAAYC,EAAOC,EAAMC,CAAO,EACnD,GAAI,CAACgB,EAAK,KAAK,OAAQ,CACrB,MAAM,oCAAoC,EAC1C,MACD,CAEDL,EAAQ,UAAYR,EAAca,EAAK,IAAI,EAC3CH,EAAW,IAAII,EAAe,YAAY,EAAE,QAAO,EAE/CD,EAAK,UAAYhB,GACnBY,EAAY,UAAU,OAAO,WAAW,CAE3C,OAAQM,EAAO,CACd,QAAQ,MAAMA,CAAK,CACpB,EACH,CAEA,eAAeH,GAAa,CAC1BhB,GAAQ,EAER,GAAI,CACF,MAAMiB,EAAO,MAAMnB,EAAYC,EAAOC,EAAMC,CAAO,EAEnDW,EAAQ,mBAAmB,YAAaR,EAAca,EAAK,IAAI,CAAC,EAChEH,EAAS,QAAO,EAEZd,EAAOC,GAAWgB,EAAK,YACzBJ,EAAY,UAAU,IAAI,WAAW,EACrC,MAAM,4DAA4D,GAGpEO,GACD,OAAQD,EAAO,CACd,QAAQ,MAAMA,CAAK,CACpB,CACH,CAEA,SAASC,GAAa,CACpB,KAAM,CAAE,OAAQC,CAAU,EAAKT,EAAQ,kBAAkB,wBACzD,OAAO,SAAS,CACd,IAAKS,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}