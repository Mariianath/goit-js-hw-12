{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function renderGallery(images, container) {\n  const markup = images\n    .map(({ webformatURL, largeImageURL, tags }) => {\n      if (!webformatURL || !largeImageURL || !tags) return ''; \n      return `\n        <a class=\"gallery__item\" href=\"${largeImageURL}\">\n          <img class=\"gallery__image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>`;\n    })\n    .join('');\n  container.insertAdjacentHTML('beforeend', markup);\n}\n","import axios from 'axios';\n\nconst API_KEY = '47523471-f6b5bf2e20bc9d436dc6d8dc4';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  if (!query || query.trim() === '') {\n    throw new Error('Query cannot be empty. Please provide a search term.');\n  }\n\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: perPage,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error.message);\n    throw new Error('Failed to fetch images. Please try again later.');\n  }\n}\n","import { renderGallery } from './js/render-functions.js';\nimport { fetchImages } from './js/pixabay-api.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('input[name=\"searchQuery\"]');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nlet lightbox = new SimpleLightbox('.gallery a');\nlet currentPage = 1;\nlet currentQuery = '';\n\nform.addEventListener('submit', onSearch);\nloadMoreButton.addEventListener('click', onLoadMore);\n\nasync function onSearch(event) {\n  event.preventDefault();\n  currentQuery = input.value.trim();\n  if (!currentQuery) {\n    iziToast.warning({ title: 'Warning', message: 'Please enter a search query.' });\n    return;\n  }\n  currentPage = 1;\n  resetGallery();\n  await loadImages();\n}\n\nasync function onLoadMore() {\n  currentPage += 1;\n  await loadImages();\n  scrollPageSmoothly();\n}\n\nasync function loadImages() {\n  try {\n    toggleLoader(true);\n    const { hits, totalHits } = await fetchImages(currentQuery, currentPage);\n\n    if (hits.length === 0 && currentPage === 1) {\n      iziToast.warning({ title: 'Warning', message: 'No images found. Try another query.' });\n      return;\n    }\n    renderGallery(hits, gallery);\n    lightbox.refresh();\n\n    if (hits.length < 15 || gallery.children.length >= totalHits) {\n      loadMoreButton.classList.add('is-hidden');\n      iziToast.info({ title: 'End', message: 'You have reached the end of search results.' });\n    } else {\n      loadMoreButton.classList.remove('is-hidden');\n    }\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: 'Something went wrong, try again later.' });\n  } finally {\n    toggleLoader(false);\n  }\n}\n\nfunction resetGallery() {\n  gallery.innerHTML = '';\n  loadMoreButton.classList.add('is-hidden');\n}\n\nfunction toggleLoader(show) {\n  loader.classList.toggle('is-hidden', !show);\n}\n\nfunction scrollPageSmoothly() {\n  const cardHeight = document.querySelector('.gallery__item').getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["renderGallery","images","container","markup","webformatURL","largeImageURL","tags","API_KEY","BASE_URL","fetchImages","query","page","perPage","params","axios","error","form","input","gallery","loadMoreButton","loader","lightbox","SimpleLightbox","currentPage","currentQuery","onSearch","onLoadMore","event","iziToast","resetGallery","loadImages","scrollPageSmoothly","toggleLoader","hits","totalHits","show","cardHeight"],"mappings":"owBAAO,SAASA,EAAcC,EAAQC,EAAW,CAC/C,MAAMC,EAASF,EACZ,IAAI,CAAC,CAAE,aAAAG,EAAc,cAAAC,EAAe,KAAAC,CAAI,IACnC,CAACF,GAAgB,CAACC,GAAiB,CAACC,EAAa,GAC9C;AAAA,yCAC4BD,CAAa;AAAA,6CACTD,CAAY,UAAUE,CAAI;AAAA,aAElE,EACA,KAAK,EAAE,EACVJ,EAAU,mBAAmB,YAAaC,CAAM,CAClD,CCTA,MAAMI,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,GAAI,CAACF,GAASA,EAAM,KAAI,IAAO,GAC7B,MAAM,IAAI,MAAM,sDAAsD,EAGxE,MAAMG,EAAS,CACb,IAAKN,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CACd,EAEE,GAAI,CAEF,OADiB,MAAME,EAAM,IAAIN,EAAU,CAAE,OAAAK,CAAM,CAAE,GACrC,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,EAAM,OAAO,EAC/C,IAAI,MAAM,iDAAiD,CAClE,CACH,CCpBA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQ,SAAS,cAAc,2BAA2B,EAC1DC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAiB,SAAS,cAAc,YAAY,EACpDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAC1CC,EAAc,EACdC,EAAe,GAEnBR,EAAK,iBAAiB,SAAUS,CAAQ,EACxCN,EAAe,iBAAiB,QAASO,CAAU,EAEnD,eAAeD,EAASE,EAAO,CAG7B,GAFAA,EAAM,eAAc,EACpBH,EAAeP,EAAM,MAAM,OACvB,CAACO,EAAc,CACjBI,EAAS,QAAQ,CAAE,MAAO,UAAW,QAAS,8BAA8B,CAAE,EAC9E,MACD,CACDL,EAAc,EACdM,IACA,MAAMC,EAAU,CAClB,CAEA,eAAeJ,GAAa,CAC1BH,GAAe,EACf,MAAMO,EAAU,EAChBC,GACF,CAEA,eAAeD,GAAa,CAC1B,GAAI,CACFE,EAAa,EAAI,EACjB,KAAM,CAAE,KAAAC,EAAM,UAAAC,CAAW,EAAG,MAAMzB,EAAYe,EAAcD,CAAW,EAEvE,GAAIU,EAAK,SAAW,GAAKV,IAAgB,EAAG,CAC1CK,EAAS,QAAQ,CAAE,MAAO,UAAW,QAAS,qCAAqC,CAAE,EACrF,MACD,CACD5B,EAAciC,EAAMf,CAAO,EAC3BG,EAAS,QAAO,EAEZY,EAAK,OAAS,IAAMf,EAAQ,SAAS,QAAUgB,GACjDf,EAAe,UAAU,IAAI,WAAW,EACxCS,EAAS,KAAK,CAAE,MAAO,MAAO,QAAS,6CAA6C,CAAE,GAEtFT,EAAe,UAAU,OAAO,WAAW,CAE9C,MAAe,CACdS,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,wCAAwC,CAAE,CACxF,QAAY,CACRI,EAAa,EAAK,CACnB,CACH,CAEA,SAASH,GAAe,CACtBX,EAAQ,UAAY,GACpBC,EAAe,UAAU,IAAI,WAAW,CAC1C,CAEA,SAASa,EAAaG,EAAM,CAC1Bf,EAAO,UAAU,OAAO,YAAa,CAACe,CAAI,CAC5C,CAEA,SAASJ,GAAqB,CAC5B,MAAMK,EAAa,SAAS,cAAc,gBAAgB,EAAE,sBAAuB,EAAC,OACpF,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}